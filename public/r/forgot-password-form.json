{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "forgot-password-form",
  "type": "registry:component",
  "title": "Forgot Password Form",
  "description": "",
  "dependencies": [
    "@hookform/resolvers",
    "better-auth",
    "lucide-react",
    "react-hook-form",
    "zod"
  ],
  "registryDependencies": [
    "true/auth-form.json",
    "true/auth-localization.json",
    "true/auth-ui-provider.json",
    "button",
    "true/captcha.json",
    "form",
    "input",
    "true/use-captcha.json",
    "true/use-hydrated.json",
    "true/utils.json"
  ],
  "files": [
    {
      "path": "src/components/auth/forms/forgot-password-form.tsx",
      "content": "\"use client\"\n\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport type { BetterFetchOption } from \"better-auth/react\"\nimport { Loader2 } from \"lucide-react\"\nimport { useContext, useEffect } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport * as z from \"zod\"\nimport { useCaptcha } from \"../../../hooks/use-captcha\"\nimport { useIsHydrated } from \"../../../hooks/use-hydrated\"\nimport { AuthUIContext } from \"../../../lib/auth-ui-provider\"\nimport { cn, getLocalizedError } from \"../../../lib/utils\"\nimport type { AuthLocalization } from \"../../../localization/auth-localization\"\nimport { Captcha } from \"../../captcha/captcha\"\nimport { Button } from \"../../ui/button\"\nimport {\n    Form,\n    FormControl,\n    FormField,\n    FormItem,\n    FormLabel,\n    FormMessage\n} from \"../../ui/form\"\nimport { Input } from \"../../ui/input\"\nimport type { AuthFormClassNames } from \"../auth-form\"\n\nexport interface ForgotPasswordFormProps {\n    className?: string\n    classNames?: AuthFormClassNames\n    isSubmitting?: boolean\n    localization: Partial<AuthLocalization>\n    setIsSubmitting?: (value: boolean) => void\n}\n\nexport function ForgotPasswordForm({\n    className,\n    classNames,\n    isSubmitting,\n    localization,\n    setIsSubmitting\n}: ForgotPasswordFormProps) {\n    const isHydrated = useIsHydrated()\n    const { captchaRef, getCaptchaHeaders, resetCaptcha } = useCaptcha({\n        localization\n    })\n\n    const {\n        authClient,\n        basePath,\n        baseURL,\n        localization: contextLocalization,\n        navigate,\n        toast,\n        viewPaths\n    } = useContext(AuthUIContext)\n\n    localization = { ...contextLocalization, ...localization }\n\n    const formSchema = z.object({\n        email: z\n            .string()\n            .min(1, {\n                message: `${localization.EMAIL} ${localization.IS_REQUIRED}`\n            })\n            .email({\n                message: `${localization.EMAIL} ${localization.IS_INVALID}`\n            })\n    })\n\n    const form = useForm({\n        resolver: zodResolver(formSchema),\n        defaultValues: {\n            email: \"\"\n        }\n    })\n\n    isSubmitting = isSubmitting || form.formState.isSubmitting\n\n    useEffect(() => {\n        setIsSubmitting?.(form.formState.isSubmitting)\n    }, [form.formState.isSubmitting, setIsSubmitting])\n\n    async function forgotPassword({ email }: z.infer<typeof formSchema>) {\n        try {\n            const fetchOptions: BetterFetchOption = {\n                throw: true,\n                headers: await getCaptchaHeaders(\"/forget-password\")\n            }\n\n            await authClient.requestPasswordReset({\n                email,\n                redirectTo: `${baseURL}${basePath}/${viewPaths.RESET_PASSWORD}`,\n                fetchOptions\n            })\n\n            toast({\n                variant: \"success\",\n                message: localization.FORGOT_PASSWORD_EMAIL\n            })\n\n            navigate(\n                `${basePath}/${viewPaths.SIGN_IN}${window.location.search}`\n            )\n        } catch (error) {\n            toast({\n                variant: \"error\",\n                message: getLocalizedError({ error, localization })\n            })\n            resetCaptcha()\n        }\n    }\n\n    return (\n        <Form {...form}>\n            <form\n                onSubmit={form.handleSubmit(forgotPassword)}\n                noValidate={isHydrated}\n                className={cn(\"grid w-full gap-6\", className, classNames?.base)}\n            >\n                <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel className={classNames?.label}>\n                                {localization.EMAIL}\n                            </FormLabel>\n\n                            <FormControl>\n                                <Input\n                                    className={classNames?.input}\n                                    type=\"email\"\n                                    placeholder={localization.EMAIL_PLACEHOLDER}\n                                    disabled={isSubmitting}\n                                    {...field}\n                                />\n                            </FormControl>\n\n                            <FormMessage className={classNames?.error} />\n                        </FormItem>\n                    )}\n                />\n\n                <Captcha\n                    ref={captchaRef}\n                    localization={localization}\n                    action=\"/forget-password\"\n                />\n\n                <Button\n                    type=\"submit\"\n                    disabled={isSubmitting}\n                    className={cn(\n                        \"w-full\",\n                        classNames?.button,\n                        classNames?.primaryButton\n                    )}\n                >\n                    {isSubmitting ? (\n                        <Loader2 className=\"animate-spin\" />\n                    ) : (\n                        localization.FORGOT_PASSWORD_ACTION\n                    )}\n                </Button>\n            </form>\n        </Form>\n    )\n}\n",
      "type": "registry:component"
    }
  ]
}