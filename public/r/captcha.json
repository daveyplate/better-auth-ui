{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "captcha",
  "type": "registry:component",
  "title": "Captcha",
  "description": "",
  "dependencies": [
    "@hcaptcha/react-hcaptcha",
    "@marsidev/react-turnstile"
  ],
  "registryDependencies": [
    "http://localhost:3000/r/auth-localization.json",
    "http://localhost:3000/r/auth-ui-provider.json",
    "http://localhost:3000/r/recaptcha-badge.json",
    "http://localhost:3000/r/recaptcha-v2.json",
    "http://localhost:3000/r/use-theme.json"
  ],
  "files": [
    {
      "path": "src/components/captcha/captcha.tsx",
      "content": "import HCaptcha from \"@hcaptcha/react-hcaptcha\"\nimport { Turnstile } from \"@marsidev/react-turnstile\"\nimport { type RefObject, useContext } from \"react\"\n\nimport { useTheme } from \"../../hooks/use-theme\"\nimport { AuthUIContext } from \"../../lib/auth-ui-provider\"\nimport type { AuthLocalization } from \"../../localization/auth-localization\"\nimport { RecaptchaBadge } from \"./recaptcha-badge\"\nimport { RecaptchaV2 } from \"./recaptcha-v2\"\n\n// Default captcha endpoints\nconst DEFAULT_CAPTCHA_ENDPOINTS = [\n    \"/sign-up/email\",\n    \"/sign-in/email\",\n    \"/forget-password\"\n]\n\ninterface CaptchaProps {\n    // biome-ignore lint/suspicious/noExplicitAny: ignore\n    ref: RefObject<any>\n    localization: Partial<AuthLocalization>\n    action?: string // Optional action to check if it's in the endpoints list\n}\n\nexport function Captcha({ ref, localization, action }: CaptchaProps) {\n    const { captcha } = useContext(AuthUIContext)\n    if (!captcha) return null\n\n    // If action is provided, check if it's in the list of captcha-enabled endpoints\n    if (action) {\n        const endpoints = captcha.endpoints || DEFAULT_CAPTCHA_ENDPOINTS\n        if (!endpoints.includes(action)) {\n            return null\n        }\n    }\n\n    const { theme } = useTheme()\n\n    const showRecaptchaV2 =\n        captcha.provider === \"google-recaptcha-v2-checkbox\" ||\n        captcha.provider === \"google-recaptcha-v2-invisible\"\n\n    const showRecaptchaBadge =\n        captcha.provider === \"google-recaptcha-v3\" ||\n        captcha.provider === \"google-recaptcha-v2-invisible\"\n\n    const showTurnstile = captcha.provider === \"cloudflare-turnstile\"\n\n    const showHCaptcha = captcha.provider === \"hcaptcha\"\n\n    return (\n        <>\n            {showRecaptchaV2 && <RecaptchaV2 ref={ref} />}\n            {showRecaptchaBadge && (\n                <RecaptchaBadge localization={localization} />\n            )}\n            {showTurnstile && (\n                <Turnstile\n                    className=\"mx-auto\"\n                    ref={ref}\n                    siteKey={captcha.siteKey}\n                    options={{\n                        theme: theme,\n                        size: \"flexible\"\n                    }}\n                />\n            )}\n            {showHCaptcha && (\n                <div className=\"mx-auto\">\n                    <HCaptcha\n                        ref={ref}\n                        sitekey={captcha.siteKey}\n                        theme={theme}\n                    />\n                </div>\n            )}\n        </>\n    )\n}\n",
      "type": "registry:component"
    }
  ]
}