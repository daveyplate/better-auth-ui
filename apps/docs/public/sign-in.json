{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sign-in",
  "type": "registry:block",
  "title": "Sign In",
  "description": "A complete sign-in form component with email/password, magic link, and social provider support.",
  "dependencies": [
    "button",
    "card",
    "input",
    "label",
    "checkbox",
    "separator",
    "use-auth"
  ],
  "files": [
    {
      "path": "src/components/auth/sign-in.tsx",
      "content": "\"use client\"\n\nimport { type AuthConfig, cn, useAuth } from \"@better-auth-ui/react\"\nimport type { DeepPartial } from \"better-auth/client/plugins\"\nimport { type FormEvent, useState } from \"react\"\nimport { toast } from \"sonner\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle\n} from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Loader2 } from \"lucide-react\"\nimport { MagicLinkButton } from \"./magic-link-button\"\nimport { ProviderButtons, type SocialLayout } from \"./provider-buttons\"\nimport { ResendVerificationButton } from \"./resend-verification-button\"\n\nconst signInLocalization = {\n  ...MagicLinkButton.localization,\n  ...ProviderButtons.localization,\n  ...ResendVerificationButton.localization,\n  EMAIL: \"Email\",\n  EMAIL_PLACEHOLDER: \"Enter your email\",\n  FORGOT_PASSWORD: \"Forgot password?\",\n  PASSWORD: \"Password\",\n  PASSWORD_PLACEHOLDER: \"Enter your password\",\n  NEED_TO_CREATE_AN_ACCOUNT: \"Need to create an account?\",\n  OR: \"OR\",\n  REMEMBER_ME: \"Remember me\",\n  SIGN_IN: \"Sign In\",\n  SIGN_UP: \"Sign Up\"\n}\n\nexport type SignInLocalization = typeof signInLocalization\n\nexport type SignInProps = DeepPartial<AuthConfig> & {\n  className?: string\n  localization?: Partial<SignInLocalization>\n  socialLayout?: SocialLayout\n}\n\n/**\n * Renders the sign-in UI with email/password, magic link, and social provider options based on the provided auth configuration.\n *\n * The component handles sign-in submission, offers a resend verification action when the account is unverified, refetches the session on successful sign-in, and navigates to the configured redirect path.\n *\n * @returns A React element for the sign-in form and related controls configured according to the auth settings\n */\nexport function SignIn({ className, ...props }: SignInProps) {\n  const localization = { ...SignIn.localization, ...props.localization }\n\n  const {\n    authClient,\n    basePaths,\n    baseURL,\n    emailAndPassword,\n    magicLink,\n    redirectTo,\n    socialProviders,\n    viewPaths,\n    navigate,\n    Link\n  } = useAuth(props)\n\n  const { refetch } = authClient.useSession()\n\n  const [password, setPassword] = useState(\"\")\n  const [isPending, setIsPending] = useState(false)\n  const [rememberMe, setRememberMe] = useState(false)\n\n  const showSeparator =\n    emailAndPassword?.enabled && socialProviders && socialProviders.length > 0\n\n  const onSubmit = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setIsPending(true)\n\n    const formData = new FormData(e.currentTarget)\n\n    const email = formData.get(\"email\") as string\n    const password = formData.get(\"password\") as string\n\n    const { error } = await authClient.signIn.email(\n      {\n        email,\n        password,\n        ...(emailAndPassword?.rememberMe && { rememberMe: rememberMe })\n      },\n      { disableSignal: true }\n    )\n\n    if (error) {\n      if (error.code === \"EMAIL_NOT_VERIFIED\") {\n        toast.error(error.message, {\n          action: (\n            <ResendVerificationButton\n              authClient={authClient}\n              baseURL={baseURL}\n              email={email}\n              localization={localization}\n              redirectTo={redirectTo}\n            />\n          )\n        })\n      } else {\n        toast.error(error.message)\n      }\n\n      setPassword(\"\")\n      setIsPending(false)\n      return\n    }\n\n    await refetch()\n    navigate(redirectTo)\n    setIsPending(false)\n  }\n\n  return (\n    <Card className={cn(\"w-full max-w-sm\", className)}>\n      <CardHeader>\n        <CardTitle className=\"text-xl\">{localization.SIGN_IN}</CardTitle>\n      </CardHeader>\n\n      <CardContent>\n        <form className=\"flex flex-col gap-6\" onSubmit={onSubmit}>\n          {emailAndPassword?.enabled && (\n            <>\n              <div className=\"flex flex-col gap-4\">\n                <div className=\"flex flex-col gap-2\">\n                  <Label htmlFor=\"email\">{localization.EMAIL}</Label>\n                  <Input\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    autoComplete=\"email\"\n                    placeholder={localization.EMAIL_PLACEHOLDER}\n                    required\n                    disabled={isPending}\n                  />\n                </div>\n\n                <div className=\"flex flex-col gap-2\">\n                  <div className=\"flex justify-between items-center\">\n                    <Label htmlFor=\"password\">{localization.PASSWORD}</Label>\n\n                    {!emailAndPassword?.rememberMe &&\n                      emailAndPassword?.forgotPassword && (\n                        <Link\n                          href={`${basePaths.auth}/${viewPaths.auth.forgotPassword}`}\n                          className=\"text-sm text-primary hover:underline\"\n                        >\n                          {localization.FORGOT_PASSWORD}\n                        </Link>\n                      )}\n                  </div>\n                  <Input\n                    id=\"password\"\n                    name=\"password\"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                    placeholder={localization.PASSWORD_PLACEHOLDER}\n                    required\n                    minLength={8}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    disabled={isPending}\n                  />\n                </div>\n              </div>\n\n              {emailAndPassword.rememberMe && (\n                <div className=\"flex justify-between items-center\">\n                  <div className=\"flex items-center gap-2\">\n                    <Checkbox\n                      id=\"rememberMe\"\n                      checked={rememberMe}\n                      onCheckedChange={(checked) => {\n                        setRememberMe(checked === true)\n                      }}\n                      disabled={isPending}\n                    />\n                    <Label\n                      htmlFor=\"rememberMe\"\n                      className=\"cursor-pointer text-sm font-normal\"\n                    >\n                      {localization.REMEMBER_ME}\n                    </Label>\n                  </div>\n\n                  {emailAndPassword?.forgotPassword && (\n                    <Link\n                      href={`${basePaths.auth}/${viewPaths.auth.forgotPassword}`}\n                      className=\"text-sm text-primary hover:underline\"\n                    >\n                      {localization.FORGOT_PASSWORD}\n                    </Link>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex flex-col gap-4\">\n                <Button type=\"submit\" className=\"w-full\" disabled={isPending}>\n                  {isPending && <Loader2 className=\"size-4 animate-spin\" />}\n                  {localization.SIGN_IN}\n                </Button>\n\n                {magicLink && (\n                  <MagicLinkButton\n                    view=\"signIn\"\n                    isPending={isPending}\n                    localization={localization}\n                  />\n                )}\n              </div>\n            </>\n          )}\n\n          {showSeparator && (\n            <div className=\"flex items-center gap-4\">\n              <Separator className=\"flex-1\" />\n\n              <p className=\"text-xs text-muted-foreground shrink-0\">\n                {localization.OR}\n              </p>\n\n              <Separator className=\"flex-1\" />\n            </div>\n          )}\n\n          {socialProviders && socialProviders.length > 0 && (\n            <div className=\"flex flex-col gap-4\">\n              <ProviderButtons\n                {...props}\n                isPending={isPending}\n                setIsPending={setIsPending}\n                localization={localization}\n              />\n            </div>\n          )}\n\n          {emailAndPassword?.enabled && (\n            <p className=\"text-sm justify-center flex gap-2 items-center\">\n              {localization.NEED_TO_CREATE_AN_ACCOUNT}\n\n              <Link\n                href={`${basePaths.auth}/${viewPaths.auth.signUp}`}\n                className=\"text-primary hover:underline\"\n              >\n                {localization.SIGN_UP}\n              </Link>\n            </p>\n          )}\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n\nSignIn.localization = signInLocalization\n\n",
      "type": "registry:component"
    },
    {
      "path": "src/components/auth/magic-link-button.tsx",
      "content": "\"use client\"\n\nimport type { AuthView } from \"@better-auth-ui/core\"\nimport { cn, useAuth } from \"@better-auth-ui/react\"\nimport { Envelope, Lock } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\nconst magicLinkButtonLocalization = {\n  CONTINUE_WITH_MAGIC_LINK: \"Continue with Magic Link\",\n  CONTINUE_WITH_PASSWORD: \"Continue with Password\"\n}\n\nexport type MagicLinkButtonLocalization = typeof magicLinkButtonLocalization\n\nexport type MagicLinkButtonProps = {\n  isPending: boolean\n  localization?: Partial<MagicLinkButtonLocalization>\n  view?: AuthView\n}\n\n/**\n * Render a full-width tertiary button that links to either the magic-link or sign-in route and displays the corresponding icon and label.\n *\n * The component merges provided localization overrides with built-in defaults. When `isPending` is true, the button receives disabled styling and prevents pointer interactions.\n *\n * @param isPending - If true, apply disabled styling and prevent interactions\n * @param view - Current auth view; when `\"magicLink\"`, the button shows the password/sign-in variant\n * @param props - Additional props; supported property `localization` can provide partial overrides for button text\n * @returns A link-styled button element that navigates to the appropriate auth route and shows the matching icon and text\n */\nexport function MagicLinkButton({\n  isPending,\n  view,\n  ...props\n}: MagicLinkButtonProps) {\n  const localization = {\n    ...MagicLinkButton.localization,\n    ...props.localization\n  }\n\n  const { basePaths, viewPaths, Link } = useAuth()\n\n  const isMagicLinkView = view === \"magicLink\"\n\n  return (\n    <Link\n      href={`${basePaths.auth}/${isMagicLinkView ? viewPaths.auth.signIn : viewPaths.auth.magicLink}`}\n      className={cn(\n        \"w-full\",\n        isPending && \"pointer-events-none opacity-50\"\n      )}\n    >\n      <Button\n        type=\"button\"\n        variant=\"outline\"\n        className=\"w-full\"\n        disabled={isPending}\n      >\n        {isMagicLinkView ? (\n          <Lock className=\"size-4\" />\n        ) : (\n          <Envelope className=\"size-4\" />\n        )}\n        {isMagicLinkView\n          ? localization.CONTINUE_WITH_PASSWORD\n          : localization.CONTINUE_WITH_MAGIC_LINK}\n      </Button>\n    </Link>\n  )\n}\n\nMagicLinkButton.localization = magicLinkButtonLocalization\n\n",
      "type": "registry:component"
    },
    {
      "path": "src/components/auth/provider-buttons.tsx",
      "content": "\"use client\"\n\nimport { getProviderName } from \"@better-auth-ui/core\"\nimport {\n  type AuthConfig,\n  cn,\n  providerIcons,\n  useAuth\n} from \"@better-auth-ui/react\"\nimport type { DeepPartial } from \"better-auth/client/plugins\"\nimport { useMemo } from \"react\"\nimport { toast } from \"sonner\"\nimport { Button } from \"@/components/ui/button\"\n\nconst providerButtonsLocalization = {\n  CONTINUE_WITH_PROVIDER: \"Continue with {provider}\"\n}\n\nexport type ProviderButtonsLocalization = typeof providerButtonsLocalization\n\nexport type ProviderButtonsProps = DeepPartial<AuthConfig> & {\n  isPending: boolean\n  localization?: Partial<ProviderButtonsLocalization>\n  setIsPending: (pending: boolean) => void\n  socialLayout?: SocialLayout\n}\n\nexport type SocialLayout = \"auto\" | \"horizontal\" | \"vertical\" | \"grid\"\n\n/**\n * Render social provider sign-in buttons and handle sign-in initiation and pending state.\n *\n * @param isPending - When true, disables all provider buttons.\n * @param setIsPending - Callback to update the pending state while a sign-in request is in progress.\n * @param socialLayout - Preferred layout for the provider buttons; when set to `\"auto\"` the layout is chosen based on the number of available providers.\n * @returns A JSX element containing the configured social provider buttons (icons and optional labels) with click handlers that start social sign-in.\n */\nexport function ProviderButtons({\n  isPending,\n  setIsPending,\n  socialLayout = \"auto\",\n  ...props\n}: ProviderButtonsProps) {\n  const localization = {\n    ...ProviderButtons.localization,\n    ...props.localization\n  }\n\n  const { authClient, baseURL, redirectTo, socialProviders } = useAuth(props)\n\n  const resolvedSocialLayout = useMemo(() => {\n    if (!socialProviders?.length) {\n      return socialLayout\n    }\n\n    if (socialLayout === \"auto\") {\n      if (socialProviders.length === 1) {\n        return \"horizontal\"\n      }\n      if (socialProviders.length === 2) {\n        return \"grid\"\n      }\n      if (socialProviders.length === 3) {\n        return \"vertical\"\n      }\n      if (socialProviders.length === 4) {\n        return \"horizontal\"\n      }\n\n      // if it's odd, return vertical\n      if (socialProviders.length % 2 !== 0) {\n        return \"vertical\"\n      }\n\n      return \"grid\"\n    }\n    return socialLayout\n  }, [socialLayout, socialProviders?.length])\n\n  const handleClick = async (provider: string) => {\n    setIsPending(true)\n\n    const callbackURL = `${baseURL}${redirectTo}`\n\n    const { error } = await authClient.signIn.social({\n      provider,\n      callbackURL\n    })\n\n    setIsPending(false)\n\n    if (error) {\n      toast.error(error.message)\n      return\n    }\n  }\n\n  return (\n    <div\n      className={cn(\n        \"gap-4\",\n        resolvedSocialLayout === \"vertical\" && \"flex flex-col\",\n        resolvedSocialLayout === \"horizontal\" && \"flex flex-row\",\n        resolvedSocialLayout === \"grid\" && \"grid grid-cols-2\"\n      )}\n    >\n      {socialProviders?.map((provider) => {\n        const ProviderIcon = providerIcons[provider]\n\n        return (\n          <Button\n            key={provider}\n            className=\"w-full\"\n            variant=\"outline\"\n            type=\"button\"\n            disabled={isPending}\n            onClick={() => handleClick(provider)}\n          >\n            <ProviderIcon className=\"size-4\" />\n            {resolvedSocialLayout === \"vertical\"\n              ? localization.CONTINUE_WITH_PROVIDER.replace(\n                  \"{provider}\",\n                  getProviderName(provider)\n                )\n              : resolvedSocialLayout === \"grid\"\n                ? getProviderName(provider)\n                : null}\n          </Button>\n        )\n      })}\n    </div>\n  )\n}\n\nProviderButtons.localization = providerButtonsLocalization\n\n",
      "type": "registry:component"
    },
    {
      "path": "src/components/auth/resend-verification-button.tsx",
      "content": "\"use client\"\n\nimport type { AuthClient } from \"@better-auth-ui/react\"\nimport { Loader2 } from \"lucide-react\"\nimport { useState } from \"react\"\nimport { toast } from \"sonner\"\nimport { Button } from \"@/components/ui/button\"\n\nconst resendVerificationButtonLocalization = {\n  RESEND: \"Resend\",\n  VERIFICATION_EMAIL_SENT: \"Verification email sent!\"\n}\n\nexport type ResendVerificationButtonLocalization =\n  typeof resendVerificationButtonLocalization\n\nexport type ResendVerificationButtonProps = {\n  authClient: AuthClient\n  baseURL?: string\n  email: string\n  localization?: Partial<ResendVerificationButtonLocalization>\n  redirectTo: string\n}\n\n/**\n * Renders a small button that initiates sending a verification email to the given address.\n *\n * @param baseURL - Optional base URL prepended to `redirectTo` to form the verification callback URL\n * @param email - Recipient email address for the verification message\n * @param redirectTo - Path appended to `baseURL` to form the verification callback URL\n * @returns A Button element that initiates resending a verification email and reflects the request state\n */\nexport function ResendVerificationButton({\n  authClient,\n  baseURL,\n  email,\n  redirectTo,\n  ...props\n}: ResendVerificationButtonProps) {\n  const localization = {\n    ...ResendVerificationButton.localization,\n    ...props.localization\n  }\n\n  const [isResending, setIsResending] = useState(false)\n\n  return (\n    <Button\n      size=\"sm\"\n      disabled={isResending}\n      onClick={async () => {\n        setIsResending(true)\n\n        const callbackURL = `${baseURL}${redirectTo}`\n\n        const { error } = await authClient.sendVerificationEmail({\n          email,\n          callbackURL\n        })\n\n        toast.dismiss()\n        setIsResending(false)\n\n        if (error) {\n          toast.error(error.message)\n        } else {\n          toast.success(localization.VERIFICATION_EMAIL_SENT)\n        }\n      }}\n    >\n      {isResending && <Loader2 className=\"size-4 animate-spin\" />}\n      {localization.RESEND}\n    </Button>\n  )\n}\n\nResendVerificationButton.localization = resendVerificationButtonLocalization\n\n",
      "type": "registry:component"
    }
  ]
}