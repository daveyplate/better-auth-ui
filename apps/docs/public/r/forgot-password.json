{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "forgot-password",
  "type": "registry:component",
  "title": "Forgot Password",
  "description": "A form component for requesting a password reset link via email.",
  "dependencies": ["@better-auth-ui/react@workspace:*", "better-auth"],
  "registryDependencies": [
    "button",
    "card",
    "input",
    "field",
    "sonner",
    "spinner"
  ],
  "files": [
    {
      "path": "src/components/auth/forgot-password.tsx",
      "content": "\"use client\"\n\nimport type { AnyAuthConfig } from \"@better-auth-ui/react\"\nimport { useState } from \"react\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport {\n  Field,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLabel\n} from \"@/components/ui/field\"\nimport { Input } from \"@/components/ui/input\"\nimport { Spinner } from \"@/components/ui/spinner\"\nimport { useAuth } from \"@/hooks/auth/use-auth\"\nimport { useForgotPassword } from \"@/hooks/auth/use-forgot-password\"\nimport { cn } from \"@/lib/utils\"\n\nexport type ForgotPasswordProps = AnyAuthConfig & {\n  className?: string\n}\n\n/**\n * Renders a \"Forgot Password\" form with an email input and submit button.\n */\nexport function ForgotPassword({ className, ...config }: ForgotPasswordProps) {\n  const context = useAuth(config)\n\n  const { basePaths, localization, viewPaths, Link } = context\n\n  const [{ email }, forgotPassword, isPending] = useForgotPassword(context)\n\n  const [fieldErrors, setFieldErrors] = useState<{\n    email?: string\n  }>({})\n\n  return (\n    <Card className={cn(\"w-full max-w-sm py-4 md:py-6\", className)}>\n      <CardHeader className=\"px-4 md:px-6 -mb-4\">\n        <CardTitle className=\"text-xl\">\n          {localization.auth.forgotPassword}\n        </CardTitle>\n      </CardHeader>\n\n      <CardContent className=\"px-4 md:px-6\">\n        <form action={forgotPassword}>\n          <FieldGroup className=\"gap-4\">\n            <Field className=\"gap-1\">\n              <FieldLabel htmlFor=\"email\">{localization.auth.email}</FieldLabel>\n\n              <Input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                defaultValue={email}\n                placeholder={localization.auth.emailPlaceholder}\n                required\n                disabled={isPending}\n                onChange={() => {\n                  setFieldErrors((prev) => ({\n                    ...prev,\n                    email: undefined\n                  }))\n                }}\n                onInvalid={(e) => {\n                  e.preventDefault()\n                  setFieldErrors((prev) => ({\n                    ...prev,\n                    email: (e.target as HTMLInputElement).validationMessage\n                  }))\n                }}\n                aria-invalid={!!fieldErrors.email}\n              />\n\n              <FieldError>{fieldErrors.email}</FieldError>\n            </Field>\n\n            <Field className=\"mt-1\">\n              <Button type=\"submit\" disabled={isPending} className=\"w-full\">\n                {isPending && <Spinner />}\n\n                {localization.auth.sendResetLink}\n              </Button>\n            </Field>\n\n            <FieldDescription className=\"flex justify-center gap-1\">\n              {localization.auth.rememberYourPassword}\n\n              <Link\n                href={`${basePaths.auth}/${viewPaths.auth.signIn}`}\n                className=\"underline underline-offset-4\"\n              >\n                {localization.auth.signIn}\n              </Link>\n            </FieldDescription>\n          </FieldGroup>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n",
      "type": "registry:component"
    },
    {
      "path": "src/hooks/auth/use-auth.tsx",
      "content": "import {\n  type AnyAuthConfig,\n  type AuthConfig,\n  AuthContext\n} from \"@better-auth-ui/react\"\nimport { deepmerge, defaultConfig } from \"@better-auth-ui/react/core\"\nimport { useContext } from \"react\"\nimport { toast } from \"sonner\"\n\nconst extendConfig: AnyAuthConfig = {\n  toast,\n  Link: (props) => <a {...props} />\n}\n\n/**\n * Constructs the effective AuthConfig by merging defaults, any AuthContext-provided config, and the optional `config` overrides.\n *\n * @param config - Partial configuration overrides applied on top of context and defaults\n * @returns The final `AuthConfig` with a non-optional `authClient`\n * @throws If the resulting config does not include an `authClient`\n */\nexport function useAuth(config?: AnyAuthConfig) {\n  const context = useContext(AuthContext)\n\n  const authConfig = deepmerge(\n    deepmerge(defaultConfig as AnyAuthConfig, extendConfig),\n    deepmerge(context || {}, config || {})\n  ) as AuthConfig\n\n  if (authConfig.authClient === undefined) {\n    throw new Error(\"[Better Auth UI] authClient is required\")\n  }\n\n  return authConfig\n}\n",
      "type": "registry:hook"
    },
    {
      "path": "../react/src/hooks/auth/use-forgot-password.ts",
      "content": "import type { AnyAuthConfig } from \"@better-auth-ui/react\"\nimport { useActionState } from \"react\"\n\nimport { useAuth } from \"./use-auth\"\n\nexport function useForgotPassword(config?: AnyAuthConfig) {\n  const { authClient, basePaths, localization, toast, viewPaths, navigate } =\n    useAuth(config)\n\n  const forgotPassword = async (_: object, formData: FormData) => {\n    const email = formData.get(\"email\") as string\n\n    const { error } = await authClient.requestPasswordReset({\n      email,\n      redirectTo: `${basePaths.auth}/${viewPaths.auth.resetPassword}`\n    })\n\n    if (error) {\n      toast.error(error.message || error.statusText)\n    } else {\n      toast.success(localization.auth.passwordResetEmailSent)\n      navigate(`${basePaths.auth}/${viewPaths.auth.signIn}`)\n    }\n\n    return { email }\n  }\n\n  return useActionState(forgotPassword, {\n    email: \"\"\n  })\n}\n",
      "type": "registry:hook"
    }
  ]
}
